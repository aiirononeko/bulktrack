ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ **BulkTrack** ãƒªãƒã‚¸ãƒˆãƒªï¼ˆ`aiirononeko/bulktrack`ï¼‰ã®å®Ÿã‚³ãƒ¼ãƒ‰ã‚’èª¿ã¹ã¦ä½œã£ãŸ **â€œæœ€å°ã§å‹•ã `.clinerules`â€** ã§ã™ã€‚  
README ãŒå¤ã„ç®‡æ‰€ã‚‚ã‚ã‚Šã¾ã—ãŸãŒã€`package.json`ãƒ»`go.mod`ãƒ»`pnpm-workspace.yaml`ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å„ªå…ˆã—ã¦åæ˜ ã—ã¦ã„ã¾ã™ã€‚îˆ€citeîˆ‚turn4view0îˆ‚turn6view0îˆ‚turn7view0îˆ‚turn10view0îˆ

---

```markdown
# .clinerules â€“ BulkTrack (mono-repo)

## 0. Modes
| Mode | Purpose | Auto-switch Trigger |
|------|---------|---------------------|
| PM        | è¦ä»¶å®šç¾©ãƒ»ã‚¿ã‚¹ã‚¯åˆ†å‰²         | `cline plan` å®Ÿè¡Œæ™‚ |
| Architect | æŠ€è¡“è¨­è¨ˆãƒ»ä¾å­˜é¸å®š           | Plan æ‰¿èªå¾Œ |
| Code      | å®Ÿè£…ãƒ»ãƒ†ã‚¹ãƒˆ                  | ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†é–‹å§‹ |
| PMO       | Self-Reviewãƒ»CI å¯¾å¿œ          | `cline act` å®Œäº† or CI Fail |

## 1. Tech Stack
### Frontend `apps/web`
- React **19** / React Router **7.5.0** (Framework Mode)
- Vite 5 + Cloudflare Workers (Modules)  
- TypeScript 5.7 / Tailwind CSS 4 / shadcn/ui  
- Clerk SDKï¼ˆ@clerk/react-routerï¼‰ for auth
### Backend `apps/api`
- Go **1.24**
- Chi Router / pgx v5 / sqlc v2  
- Fly.io machines deploy  
- Postgres (Neon)  
### Shared
- pnpm Workspaces (`apps/*`, `packages/*`)
- Go Workspace (`go.work`)

## 2. Directory Globs
```yaml
rules:
  - description: "Frontend rules"
    globs: ["apps/web/**"]
  - description: "Backend rules"
    globs: ["apps/api/**"]
  - description: "TS shared packages"
    globs: ["packages/ts-utils/**"]
  - description: "Go shared packages"
    globs: ["packages/go-shared/**"]
```

## 3. Global Guidelines
1. **ç¦æ­¢æ“ä½œ**: `.env*`, `fly.toml`, `wrangler.{toml,jsonc}`, `*.pem` ã®ç·¨é›†ãƒ»å‡ºåŠ›ç¦æ­¢ã€‚  
2. **ã‚¿ã‚¹ã‚¯ç²’åº¦**: 1 ã‚¿ã‚¹ã‚¯ â‰¦ 300 LoC å·®åˆ†ã€‚  
3. **Self-Review å¿…é ˆ** (å¤±æ•—æ™‚ã¯è‡ªå‹•ä¿®æ­£ 2 å›ã¾ã§):  
   - FE `pnpm lint && pnpm typecheck && pnpm cf-typegen && pnpm test`  
   - BE `go vet ./... && golangci-lint run && go test ./...`

## 4. Frontend Rules
- **Loader/Action Pattern** ã§ãƒ‡ãƒ¼ã‚¿å–å¾—ã€‚`useEffect` ã§ã® fetch ã¯ç¦æ­¢ã€‚  
- `pnpm cf-typegen` ã¨ `react-router typegen` ã‚’ `prebuild` ã§å®Ÿè¡Œã—ã€å‹ä¸æ•´åˆãŒå‡ºãŸã‚‰ãƒ“ãƒ«ãƒ‰å¤±æ•—ã•ã›ã‚‹ã€‚  
- Workers KV/DO ã‚’è¿½åŠ ã—ãŸã‚‰ **`apps/web/wrangler.*` ã«å·®åˆ†ã‚’å«ã‚ã‚‹**ã€‚  
- Tailwind: UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯ shadcn/ui ã‚’å„ªå…ˆã€‚ã‚¯ãƒ©ã‚¹ç«¶åˆã¯ `tailwind-merge` ã‚’ä½¿ç”¨ã€‚

## 5. Backend Rules
- ã™ã¹ã¦ã® public é–¢æ•°ã¯ `context.Context` ã‚’ç¬¬ä¸€å¼•æ•°ã€ã‚¨ãƒ©ãƒ¼ã¯ `%w` ã§ãƒ©ãƒƒãƒ—ã€‚  
- å¤–éƒ¨å‘¼ã³å‡ºã—ã¯ `context.WithTimeout` â‰¤ 2 sã€‚  
- SQLC ç”Ÿæˆå¾Œã¯ `go test ./...` ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ç¢ºèªã€‚  
- ãƒ‡ãƒ—ãƒ­ã‚¤ã¯ **`flyctl deploy --remote-only --strategy rolling`**ã€‚`scripts/deploy-api.sh` ã‚‚æ›´æ–°ã™ã‚‹ã“ã¨ã€‚

## 6. Commit Message Convention
```
<type>(<scope>): <subject>

<body>

Self-Review: Lint {lint}% | Test {test}% | Rules {rules}%
Prompt-History: {prompt_history}
```
`type`: feat | fix | docs | style | refactor | test | chore

## 7. PR Template
```
## å¤‰æ›´å†…å®¹
- ...

## èƒŒæ™¯ãƒ»ç›®çš„
- ...

## ãƒ†ã‚¹ãƒˆçµæœ
- [ ] FE CI âœ”
- [ ] BE CI âœ”
```

## 8. CI Gate
- GitHub Actions ã§ FE/BE ä¸¦åˆ—å®Ÿè¡Œã€‚  
- å¤±æ•—ã—ãŸã‚¸ãƒ§ãƒ–ã¯ PMO ãƒ¢ãƒ¼ãƒ‰ãŒ **patch-only PR** ã‚’ä½œæˆã—å†å®Ÿè¡Œã€‚

## 9. Rule Evolution
1. ã‚¿ã‚¹ã‚¯å®Œäº†ã”ã¨ã« PMO ãŒã€ŒæŒ¯ã‚Šè¿”ã‚Š & æ”¹å–„æ¡ˆã€ã‚’ Markdown ã§å‡ºåŠ›ã€‚  
2. æ¡ç”¨ã™ã‚‹æ”¹å–„ã ã‘ã‚’æ–°ã—ã„ PR ã§ `.clinerules` ã«è¿½è¨˜ã€‚  
3. æœˆæ¬¡ã§ `.clinerules` â†’ `rules/*.mdc` ã¸åˆ†å‰²ã™ã‚‹æ£šå¸ã—ã‚’æ¤œè¨ã€‚
```

---

### ğŸƒâ€â™‚ï¸ é‹ç”¨ãƒ•ãƒ­ãƒ¼ï¼ˆCline å°‚ç”¨ï¼‰

| Step | Command / Action | Outcome |
|------|------------------|---------|
| 1ï¸âƒ£  Plan | `cline plan "Add workout-export feature"` | è¦ä»¶ã¨ã‚¿ã‚¹ã‚¯åˆ†å‰²ã‚’è‡ªå‹•ç”Ÿæˆ |
| 2ï¸âƒ£  Review | ä»•æ§˜ç¢ºèªï¼†ç²’åº¦èª¿æ•´ | æ‰‹æˆ»ã‚Šé˜²æ­¢ |
| 3ï¸âƒ£  Act | `cline act` (1 ã‚¿ã‚¹ã‚¯ãšã¤) | å®Ÿè£… + Self-Review |
| 4ï¸âƒ£  Commit | Self-Review PASS â†’ ã‚³ãƒŸãƒƒãƒˆ (Conventional Commits) | å±¥æ­´å“è³ªæ‹…ä¿ |
| 5ï¸âƒ£  PR  | PMO ãŒ PR ã‚’ãƒ‰ãƒ©ãƒ•ãƒˆ | äººé–“ãƒ¬ãƒ“ãƒ¥ãƒ¼é–‹å§‹ |
| 6ï¸âƒ£  CI   | GitHub Actions å®Ÿè¡Œã€å¤±æ•—ãªã‚‰ patch-only PR ææ¡ˆ | é€Ÿæ”»ãƒªã‚«ãƒãƒª |
| 7ï¸âƒ£  Retro| æŒ¯ã‚Šè¿”ã‚Š â†’ ãƒ«ãƒ¼ãƒ«è¿½è¨˜ PR | `.clinerules` ã‚’è‚²æˆ |
